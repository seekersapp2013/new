{"version":3,"file":"connect.cjs.development.js","sources":["../src/popup.ts","../src/auth.ts","../src/react/components/connect/context.tsx","../src/react/components/logo/index.tsx","../src/react/components/checklist/index.tsx","../src/react/components/link.tsx","../src/react/components/image/index.tsx","../src/react/components/app-icon/index.tsx","../src/react/components/vector/index.tsx","../src/transactions/types.ts","../src/transactions/index.ts","../src/react/hooks/use-connect.ts","../src/react/hooks/use-app-details.tsx","../src/react/components/typography/index.tsx","../src/react/components/screen/screen-loader.tsx","../src/react/components/screen/screen.tsx","../src/react/common/index.ts","../src/react/components/screen/screen-actions.tsx","../src/react/components/screen/screen-body.tsx","../src/react/components/screen/screen-footer.tsx","../src/react/components/screen/screen-header.tsx","../src/react/components/powered-by.tsx","../src/react/components/icons/union-line.tsx","../src/react/components/icons/padlock.tsx","../src/react/components/screens/intro.tsx","../src/react/components/screens/how-it-works.tsx","../src/react/components/screens/sign-in.tsx","../src/react/hooks/use-scroll-lock.tsx","../src/react/components/modal/index.tsx","../src/react/components/connect/index.tsx","../src/ui.tsx"],"sourcesContent":["interface PopupOptions {\n  url?: string;\n  title?: string;\n  w?: number;\n  h?: number;\n  skipPopupFallback?: boolean;\n}\n\n// Width 2px wider than in-page dialog.\n// Ensures retina subpixel rounding\n// does not leave slightly blurry underlap\nconst defaultWidth = 442;\nconst defaultHeight = 532;\nconst defaultTitle = 'Continue with Secret Key';\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Window/open\nexport const popupCenter = ({\n  url,\n  title = defaultTitle,\n  w = defaultWidth,\n  h = defaultHeight,\n  skipPopupFallback,\n}: PopupOptions) => {\n  const win = window;\n  // Safari reports an incorrect browser height\n  const isSafari = (win as any).safari !== undefined;\n\n  const browserViewport = {\n    width: win.innerWidth,\n    height: win.innerHeight,\n  };\n  const browserToolbarHeight = win.outerHeight - win.innerHeight;\n  const browserSidepanelWidth = win.outerWidth - win.innerWidth;\n\n  // Such as fixed operating system UI\n  const removeUnusableSpaceX = (coord: number) =>\n    coord - (win.screen.width - win.screen.availWidth);\n  const removeUnusableSpaceY = (coord: number) =>\n    coord - (win.screen.height - win.screen.availHeight);\n\n  const browserPosition = {\n    x: removeUnusableSpaceX(win.screenX),\n    y: removeUnusableSpaceY(win.screenY),\n  };\n\n  const left = browserPosition.x + browserSidepanelWidth + (browserViewport.width - w) / 2;\n  const top =\n    browserPosition.y +\n    browserToolbarHeight +\n    (browserViewport.height - h) / 2 +\n    (isSafari ? 48 : 0);\n\n  const options = {\n    scrollbars: 'no',\n    width: w,\n    height: h,\n    top,\n    left,\n  };\n  const optionsString = Object.keys(options).map(key => {\n    return `${key}=${options[key as keyof typeof options]}`;\n  });\n  const newWindow = window.open(url, title, optionsString.join(','));\n\n  if (newWindow) {\n    newWindow.focus();\n    return newWindow;\n  }\n\n  // no popup options, just open the auth page\n  if (skipPopupFallback) {\n    return newWindow;\n  }\n  return window.open(url);\n};\n\ninterface ListenerParams<FinishedType> {\n  popup: Window | null;\n  messageParams: {\n    [key: string]: any;\n  };\n  onFinish: (payload: FinishedType) => void | Promise<void>;\n  onCancel?: () => void;\n  authURL: URL;\n}\n\nexport const setupListener = <T>({\n  popup,\n  messageParams,\n  onFinish,\n  onCancel,\n  authURL,\n}: ListenerParams<T>) => {\n  let lastPong: number | null = null;\n\n  // Send a message to the authenticator popup at a consistent interval. This allows\n  // the authenticator to 'respond'.\n  const pingInterval = 250;\n  const interval = setInterval(() => {\n    if (popup) {\n      try {\n        console.log('about to ping');\n        popup.postMessage(\n          {\n            method: 'ping',\n            ...messageParams,\n          },\n          authURL.origin\n        );\n      } catch (error) {\n        console.warn('[Blockstack] Unable to send ping to authentication service');\n        clearInterval(interval);\n      }\n    } else {\n      console.warn('[Blockstack] Unable to send ping to authentication service - popup closed');\n    }\n    if (lastPong && new Date().getTime() - lastPong > pingInterval * 2) {\n      onCancel && onCancel();\n      clearInterval(interval);\n    }\n  }, pingInterval);\n\n  const receiveMessage = async (event: MessageEvent) => {\n    if (event.data.method === 'pong') {\n      lastPong = new Date().getTime();\n      return;\n    }\n    if (event.data.source === 'blockstack-app') {\n      const data = event.data as T;\n      await onFinish(data);\n      window.focus();\n      window.removeEventListener('message', receiveMessageCallback);\n      clearInterval(interval);\n    }\n  };\n\n  const receiveMessageCallback = (event: MessageEvent) => {\n    void receiveMessage(event);\n  };\n\n  window.addEventListener('message', receiveMessageCallback, false);\n};\n","import { UserSession, AppConfig } from 'blockstack';\nimport './types';\nimport { popupCenter, setupListener } from './popup';\nimport { version } from '../package.json';\n\nexport const defaultAuthURL = 'https://app.blockstack.org';\n\nif (typeof window !== 'undefined') {\n  (window as any).__CONNECT_VERSION__ = version;\n}\n\nexport interface FinishedData {\n  authResponse: string;\n  userSession: UserSession;\n}\n\nexport interface AuthOptions {\n  /** The URL you want the user to be redirected to after authentication. */\n  redirectTo?: string;\n  manifestPath?: string;\n  /** DEPRECATED: use `onFinish` */\n  finished?: (payload: FinishedData) => void;\n  /**\n   * This callback is fired after authentication is finished.\n   * The callback is called with a single object argument, with two keys:\n   * `userSession`: a UserSession object with `userData` included\n   * `authResponse`: the raw `authResponse` string that is returned from authentication\n   * */\n  onFinish?: (payload: FinishedData) => void;\n  /** This callback is fired if the user exits before finishing */\n  onCancel?: () => void;\n  authOrigin?: string;\n  sendToSignIn?: boolean;\n  userSession?: UserSession;\n  appDetails: {\n    name: string;\n    icon: string;\n  };\n}\n\nexport const isMobile = () => {\n  const ua = navigator.userAgent;\n  if (/android/i.test(ua)) {\n    return true;\n  }\n  if (/iPad|iPhone|iPod/.test(ua)) {\n    return true;\n  }\n  if (/windows phone/i.test(ua)) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * mobile should not use a 'popup' type of window.\n */\nexport const shouldUsePopup = () => {\n  return !isMobile();\n};\n\nexport const getOrCreateUserSession = (userSession?: UserSession): UserSession => {\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nexport const authenticate = async ({\n  redirectTo = '/',\n  manifestPath,\n  finished,\n  onFinish,\n  onCancel,\n  authOrigin,\n  sendToSignIn = false,\n  userSession: _userSession,\n  appDetails,\n}: AuthOptions) => {\n  const userSession = getOrCreateUserSession(_userSession);\n  if (userSession.isUserSignedIn()) {\n    userSession.signUserOut();\n  }\n  const transitKey = userSession.generateAndStoreTransitKey();\n  const authRequest = userSession.makeAuthRequest(\n    transitKey,\n    `${document.location.origin}${redirectTo}`,\n    `${document.location.origin}${manifestPath}`,\n    userSession.appConfig.scopes,\n    undefined,\n    undefined,\n    {\n      sendToSignIn,\n      appDetails,\n      connectVersion: version,\n    }\n  );\n\n  const params = window.location.search\n    .substr(1)\n    .split('&')\n    .filter(param => param.startsWith('utm'))\n    .map(param => param.split('='));\n  const urlParams = new URLSearchParams();\n  params.forEach(([key, value]) => urlParams.set(key, value));\n  urlParams.set('authRequest', authRequest);\n\n  const path = sendToSignIn ? 'sign-in' : 'sign-up';\n\n  const extensionURL = await window.BlockstackProvider?.getURL();\n  const authURL = new URL(extensionURL || authOrigin || defaultAuthURL);\n\n  const url = `${authURL.origin}/index.html#/${path}?${urlParams.toString()}`;\n  if (shouldUsePopup()) {\n    const popup = popupCenter({\n      url,\n      // If the extension is installed, dont worry about popup blocking\n      // Otherwise, firefox will open the popup and a new tab.\n      skipPopupFallback: !!window.BlockstackProvider,\n    });\n\n    setupAuthListener({\n      popup,\n      authRequest,\n      onFinish: onFinish || finished,\n      authURL,\n      userSession,\n      onCancel,\n    });\n    return;\n  }\n\n  document.location.href = url;\n};\n\ninterface FinishedEventData {\n  authResponse: string;\n  authRequest: string;\n  source: string;\n}\n\ninterface ListenerParams {\n  popup: Window | null;\n  authRequest: string;\n  onFinish?: (payload: FinishedData) => void;\n  onCancel?: () => void;\n  authURL: URL;\n  userSession: UserSession;\n}\n\nconst setupAuthListener = ({\n  popup,\n  authRequest,\n  onFinish,\n  onCancel,\n  authURL,\n  userSession,\n}: ListenerParams) => {\n  setupListener<FinishedEventData>({\n    popup,\n    onCancel,\n    onFinish: async (data: FinishedEventData) => {\n      if (data.authRequest === authRequest) {\n        if (onFinish) {\n          const { authResponse } = data;\n          await userSession.handlePendingSignIn(authResponse);\n          onFinish({\n            authResponse,\n            userSession,\n          });\n        }\n      }\n    },\n    messageParams: {\n      authRequest,\n    },\n    authURL,\n  });\n};\n\nexport const getUserData = async (userSession?: UserSession) => {\n  userSession = getOrCreateUserSession(userSession);\n  if (userSession.isUserSignedIn()) {\n    return userSession.loadUserData();\n  }\n  if (userSession.isSignInPending()) {\n    return userSession.handlePendingSignIn();\n  }\n  return null;\n};\n","import React, { useReducer, createContext } from 'react';\nimport { AuthOptions, FinishedData } from '../../../auth';\nimport { UserSession } from 'blockstack/lib';\n\nenum States {\n  MODAL_OPEN = 'modal/open',\n  MODAL_CLOSE = 'modal/close',\n  START_AUTH = 'data/START_AUTH',\n  FINISH_AUTH = 'data/FINISH_AUTH',\n  CANCEL_AUTH = 'data/CANCEL_AUTH',\n  UPDATE_AUTH_OPTIONS = 'data/update-auth-options',\n  SCREENS_INTRO = 'screens/intro',\n  SCREENS_HOW_IT_WORKS = 'screens/how-it-works',\n  SCREENS_SIGN_IN = 'screens/sign-in',\n}\n\ntype Action = { type: string; payload?: any };\n\ntype Dispatch = (action: Action) => void;\n\ntype State = {\n  isOpen: boolean;\n  isAuthenticating: boolean;\n  screen: string;\n  authData?: FinishedData;\n  authOptions: AuthOptions;\n  userSession?: UserSession;\n};\n\nconst initialState: State = {\n  isOpen: false,\n  isAuthenticating: false,\n  screen: States.SCREENS_INTRO,\n  authData: undefined,\n  userSession: undefined,\n  authOptions: {\n    redirectTo: '',\n    manifestPath: '',\n    finished: () => null,\n    authOrigin: undefined,\n    sendToSignIn: false,\n    appDetails: {\n      name: '',\n      icon: '',\n    },\n  },\n};\n\nconst connectReducer = (state: State, { type, payload }: { type: string; payload?: any }) => {\n  switch (type) {\n    case States.MODAL_OPEN: {\n      return { ...state, isOpen: true };\n    }\n    case States.MODAL_CLOSE: {\n      return { ...state, isOpen: false };\n    }\n    case States.START_AUTH: {\n      return { ...state, isAuthenticating: true };\n    }\n    case States.FINISH_AUTH: {\n      return { ...state, isAuthenticating: false, authData: payload };\n    }\n    case States.CANCEL_AUTH: {\n      return { ...state, isAuthenticating: false };\n    }\n    case States.SCREENS_INTRO: {\n      return {\n        ...state,\n        screen: States.SCREENS_INTRO,\n      };\n    }\n    case States.SCREENS_HOW_IT_WORKS: {\n      return {\n        ...state,\n        screen: States.SCREENS_HOW_IT_WORKS,\n      };\n    }\n    case States.SCREENS_SIGN_IN: {\n      return {\n        ...state,\n        screen: States.SCREENS_SIGN_IN,\n      };\n    }\n\n    case States.UPDATE_AUTH_OPTIONS: {\n      return {\n        ...state,\n        authOptions: {\n          ...state.authOptions,\n          ...payload,\n        },\n      };\n    }\n\n    default: {\n      throw new Error(`Unhandled action type: ${type}`);\n    }\n  }\n};\n\nconst ConnectContext = createContext<State>(initialState);\n\nconst ConnectDispatchContext = createContext<Dispatch | undefined>(undefined);\n\nconst ConnectProvider = ({\n  authOptions,\n  children,\n}: {\n  authOptions: AuthOptions;\n  children: any;\n}) => {\n  const [state, dispatch] = useReducer(connectReducer, initialState);\n\n  return (\n    <ConnectContext.Provider value={{ ...state, authOptions }}>\n      <ConnectDispatchContext.Provider value={dispatch}>{children}</ConnectDispatchContext.Provider>\n    </ConnectContext.Provider>\n  );\n};\n\nexport {\n  initialState,\n  connectReducer,\n  ConnectContext,\n  ConnectDispatchContext,\n  ConnectProvider,\n  States,\n};\n","import React from 'react';\nimport { Box } from '@blockstack/ui';\n\nconst Logo = (props: any) => {\n  return (\n    <Box as=\"svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <rect width=\"24\" height=\"24\" rx=\"12\" fill=\"#E3E5FF\" />\n      <path\n        d=\"M15.2727 10.0179H14.8636V8.8125C14.8636 8.06658 14.5619 7.35121 14.0249 6.82376C13.4879 6.29632 12.7595 6 12 6C11.2405 6 10.5121 6.29632 9.9751 6.82376C9.43807 7.35121 9.13636 8.06658 9.13636 8.8125V10.0179H8.72727C8.40189 10.0182 8.08994 10.1453 7.85985 10.3713C7.62977 10.5973 7.50036 10.9036 7.5 11.2232V16.0446C7.50036 16.3642 7.62977 16.6706 7.85985 16.8966C8.08994 17.1225 8.40189 17.2497 8.72727 17.25H15.2727C15.5981 17.2497 15.9101 17.1225 16.1401 16.8966C16.3702 16.6706 16.4996 16.3642 16.5 16.0446V11.2232C16.4996 10.9036 16.3702 10.5973 16.1401 10.3713C15.9101 10.1453 15.5981 10.0182 15.2727 10.0179ZM9.95455 8.8125C9.95455 8.2797 10.17 7.76872 10.5536 7.39197C10.9372 7.01523 11.4575 6.80357 12 6.80357C12.5425 6.80357 13.0628 7.01523 13.4464 7.39197C13.83 7.76872 14.0455 8.2797 14.0455 8.8125V10.0179H9.95455V8.8125ZM12.4091 13.7231V14.6384C12.4091 14.745 12.366 14.8471 12.2893 14.9225C12.2126 14.9978 12.1085 15.0402 12 15.0402C11.8915 15.0402 11.7874 14.9978 11.7107 14.9225C11.634 14.8471 11.5909 14.745 11.5909 14.6384V13.7231C11.4349 13.6346 11.313 13.4981 11.2441 13.3347C11.1752 13.1712 11.1631 12.99 11.2097 12.8192C11.2563 12.6483 11.359 12.4973 11.5019 12.3896C11.6448 12.282 11.8199 12.2236 12 12.2236C12.1801 12.2236 12.3552 12.282 12.4981 12.3896C12.641 12.4973 12.7437 12.6483 12.7903 12.8192C12.8369 12.99 12.8248 13.1712 12.7559 13.3347C12.687 13.4981 12.5651 13.6346 12.4091 13.7231Z\"\n        fill=\"#3700FF\"\n      />\n      <rect x=\"10.5\" y=\"11.25\" width=\"3\" height=\"5.25\" fill=\"#3700FF\" />\n    </Box>\n  );\n};\n\nexport { Logo };\n","import React from 'react';\nimport { Flex, Box, Text } from '@blockstack/ui';\n\nconst Item: React.FC = ({ children }) => (\n  <Text fontSize=\"14px\" color=\"ink.900\">\n    {children}\n  </Text>\n);\ntype Item = {\n  icon: any;\n  text: any;\n};\ninterface CheckListProps {\n  items: Item[];\n}\n\nconst CheckList: React.FC<CheckListProps> = ({ items }) => (\n  <Box>\n    {items.map((item, key) => {\n      const Icon = item.icon;\n      const { text } = item;\n      return (\n        <Flex\n          px=\"extra-loose\"\n          pb=\"base-loose\"\n          pt=\"base-loose\"\n          borderBottom={items.length - 1 !== key ? '1px solid' : 'unset'}\n          borderColor=\"inherit\"\n          align=\"center\"\n          textAlign=\"left\"\n          key={key}\n        >\n          <Box color=\"blue\" alignSelf=\"stretch\" mt=\"extra-tight\" mr=\"base\">\n            <Icon />\n          </Box>\n          <Item>{text}</Item>\n        </Flex>\n      );\n    })}\n  </Box>\n);\n\nexport { CheckList };\n","import React from 'react';\nimport { Text, Box, BoxProps } from '@blockstack/ui';\n\ninterface LinkProps extends BoxProps {\n  _hover?: BoxProps;\n  onClick: () => void;\n}\n\nexport const buildEnterKeyEvent = (onClick: () => void) => {\n  return (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' && onClick) {\n      onClick();\n    }\n  };\n};\n\nexport const Link: React.FC<LinkProps> = ({\n  _hover = {},\n  children,\n  fontSize = '12px',\n  textStyle = 'caption.medium',\n  onClick,\n  ...rest\n}) => (\n  <Box {...rest} onKeyPress={buildEnterKeyEvent(onClick)} onClick={onClick} tabIndex={0}>\n    <Text\n      _hover={{ textDecoration: 'underline', cursor: 'pointer', ..._hover }}\n      fontSize={fontSize}\n      textStyle={textStyle}\n    >\n      {children}\n    </Text>\n  </Box>\n);\n","import React from 'react';\nimport { BoxProps, Box } from '@blockstack/ui';\n\ninterface ImageProps extends BoxProps {\n  src?: string;\n  alt?: string;\n  title?: string;\n  loading?: 'eager' | 'lazy' | undefined;\n}\n\nconst Image: React.FC<ImageProps> = ({ loading: _loading, ...props }) => {\n  return (\n    <Box\n      as=\"img\"\n      style={{\n        maxWidth: '100%',\n        display: 'block',\n      }}\n      {...props}\n    />\n  );\n};\n\nexport { Image };\n","import React from 'react';\nimport { Box, BoxProps } from '@blockstack/ui';\nimport { Image } from '../image';\n\ninterface AppIconProps {\n  src: string;\n  alt: string;\n}\n\nconst AppIcon: React.FC<AppIconProps & BoxProps> = ({ src, alt, ...rest }) => (\n  <Box borderRadius=\"6px\" overflow=\"hidden\" size=\"loose\" {...rest}>\n    <Image src={src} alt={alt} title={alt} loading=\"lazy\" width=\"100%\" maxHeight=\"100%\" />\n  </Box>\n);\n\nexport { AppIcon };\n","import React from 'react';\nimport Styled from 'styled-components';\n\nconst AppsIcon: React.FC = props => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n    <rect y=\"1.02686\" width=\"10.0435\" height=\"9.88235\" rx=\"1.75\" fill=\"currentColor\" />\n    <path\n      opacity=\"0.8\"\n      d=\"M13.5697 10.9091H22.2999C23.0625 10.9091 23.5444 10.0897 23.1739 9.42317L18.8088 1.57201C18.4277 0.886573 17.4419 0.886572 17.0608 1.572L12.6957 9.42316C12.3251 10.0897 12.8071 10.9091 13.5697 10.9091Z\"\n      fill=\"currentColor\"\n    />\n    <rect\n      opacity=\"0.64\"\n      y=\"13.7327\"\n      width=\"10.4348\"\n      height=\"10.2674\"\n      rx=\"5.13369\"\n      fill=\"currentColor\"\n    />\n    <path\n      opacity=\"0.4\"\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M14.672 14.0339C14.4783 13.8498 14.2188 13.7479 13.9494 13.7502C13.68 13.7525 13.4224 13.8588 13.2319 14.0462C13.0414 14.2337 12.9334 14.4872 12.931 14.7523C12.9287 15.0173 13.0322 15.2726 13.2194 15.4633L16.4894 18.6809L13.2194 21.8984C13.0266 22.088 12.9182 22.3451 12.9182 22.6133C12.9181 22.746 12.9446 22.8775 12.9962 23.0002C13.0478 23.1229 13.1235 23.2344 13.2189 23.3283C13.3142 23.4222 13.4275 23.4967 13.5521 23.5476C13.6768 23.5984 13.8104 23.6246 13.9453 23.6247C14.2179 23.6248 14.4793 23.5183 14.672 23.3288L17.9421 20.1112L21.2121 23.3288C21.4049 23.5185 21.6663 23.625 21.9389 23.625C22.2116 23.625 22.473 23.5185 22.6658 23.3288C22.8585 23.1391 22.9668 22.8819 22.9668 22.6136C22.9668 22.3454 22.8585 22.0881 22.6658 21.8984L19.3957 18.6809L22.6658 15.4633C22.7612 15.3694 22.8368 15.2579 22.8884 15.1352C22.94 15.0125 22.9665 14.881 22.9665 14.7483C22.9664 14.6155 22.9398 14.484 22.8881 14.3614C22.8364 14.2387 22.7607 14.1273 22.6653 14.0334C22.5698 13.9396 22.4565 13.8651 22.3318 13.8144C22.2071 13.7636 22.0735 13.7375 21.9386 13.7375C21.8036 13.7376 21.67 13.7638 21.5454 13.8146C21.4207 13.8655 21.3075 13.94 21.2121 14.0339L17.9421 17.2515L14.672 14.0339Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\nconst EncryptionIcon: React.FC = props => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n    <path\n      d=\"M18.5818 8.57143H17.7091V6C17.7091 4.4087 17.0655 2.88258 15.9198 1.75736C14.7741 0.632141 13.2202 0 11.6 0C9.97977 0 8.4259 0.632141 7.28022 1.75736C6.13454 2.88258 5.49091 4.4087 5.49091 6V8.57143H4.61818C3.92403 8.57218 3.25853 8.84334 2.76769 9.32541C2.27685 9.80748 2.00076 10.4611 2 11.1429V21.4286C2.00076 22.1103 2.27685 22.7639 2.76769 23.246C3.25853 23.7281 3.92403 23.9993 4.61818 24H18.5818C19.276 23.9993 19.9415 23.7281 20.4323 23.246C20.9231 22.7639 21.1992 22.1103 21.2 21.4286V11.1429C21.1992 10.4611 20.9231 9.80748 20.4323 9.32541C19.9415 8.84334 19.276 8.57218 18.5818 8.57143ZM7.23636 6C7.23636 4.86336 7.6961 3.77327 8.51444 2.96954C9.33278 2.16582 10.4427 1.71429 11.6 1.71429C12.7573 1.71429 13.8672 2.16582 14.6856 2.96954C15.5039 3.77327 15.9636 4.86336 15.9636 6V8.57143H7.23636V6Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\nconst BlockchainIcon: React.FC<{ color?: string }> = props => {\n  const color = props.color || 'currentColor';\n\n  return (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <rect width=\"12\" height=\"12\" rx=\"2.25\" fill={color} />\n      <rect opacity=\"0.6\" x=\"12\" y=\"12\" width=\"12\" height=\"12\" rx=\"2.25\" fill={color} />\n      <rect\n        opacity=\"0.4\"\n        x=\"14.75\"\n        y=\"2.75\"\n        width=\"6.5\"\n        height=\"6.5\"\n        rx=\"1\"\n        stroke={color}\n        strokeWidth=\"1.5\"\n        strokeLinejoin=\"round\"\n      />\n      <rect\n        opacity=\"0.4\"\n        x=\"2.75\"\n        y=\"14.75\"\n        width=\"6.5\"\n        height=\"6.5\"\n        rx=\"1\"\n        stroke={color}\n        strokeWidth=\"1.5\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n};\n\nconst PrivateIcon: React.FC = props => (\n  <svg width=\"18\" height=\"24\" viewBox=\"0 0 18 24\" fill=\"none\" {...props}>\n    <path\n      d=\"M15.5455 8.57143H14.7273V6C14.7273 4.4087 14.1239 2.88258 13.0498 1.75736C11.9757 0.632141 10.519 0 9 0C7.48103 0 6.02428 0.632141 4.95021 1.75736C3.87614 2.88258 3.27273 4.4087 3.27273 6V8.57143H2.45455C1.80378 8.57218 1.17987 8.84334 0.719709 9.32541C0.259547 9.80748 0.000714665 10.4611 0 11.1429V21.4286C0.000714665 22.1103 0.259547 22.7639 0.719709 23.246C1.17987 23.7281 1.80378 23.9993 2.45455 24H15.5455C16.1962 23.9993 16.8201 23.7281 17.2803 23.246C17.7405 22.7639 17.9993 22.1103 18 21.4286V11.1429C17.9993 10.4611 17.7405 9.80748 17.2803 9.32541C16.8201 8.84334 16.1962 8.57218 15.5455 8.57143ZM4.90909 6C4.90909 4.86336 5.3401 3.77327 6.10729 2.96954C6.87449 2.16582 7.91502 1.71429 9 1.71429C10.085 1.71429 11.1255 2.16582 11.8927 2.96954C12.6599 3.77327 13.0909 4.86336 13.0909 6V8.57143H4.90909V6Z\"\n      fill=\"#5548FF\"\n    />\n  </svg>\n);\n\nconst MiniSVG = Styled.svg`\n  margin-left: 4px;\n  margin-right: 4px;\n  display: inline;\n  position: relative;\n  top: -1px;\n`;\n\nconst BlockstackMini: React.FC = props => (\n  <MiniSVG width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" {...props}>\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M0.148042 1.08513C-5.58794e-08 1.42724 -3.80998e-08 1.86349 0 2.736L1.42713e-07 6L2.85387e-07 9.264C3.23525e-07 10.1365 0 10.5728 0.148042 10.9149C0.329866 11.335 0.664964 11.6701 1.08513 11.852C1.42724 12 1.86349 12 2.736 12H6H9.264C10.1365 12 10.5728 12 10.9149 11.852C11.335 11.6701 11.6701 11.335 11.852 10.9149C12 10.5728 12 10.1365 12 9.264V6V2.736C12 1.86349 12 1.42724 11.852 1.08513C11.6701 0.664963 11.335 0.329865 10.9149 0.148041C10.5728 -6.70552e-08 10.1365 -3.80998e-08 9.264 0L6 1.42713e-07L2.736 2.85387e-07C1.86349 3.23525e-07 1.40625 2.90573e-07 1.08513 0.148042C0.664964 0.329867 0.329866 0.664963 0.148042 1.08513ZM7.91566 5.16965C7.31682 5.16965 6.83125 4.68409 6.83125 4.08511C6.83125 3.48644 7.31682 3.00088 7.91566 3.00088C8.5145 3.00088 9.00007 3.48644 9.00007 4.08511C9.00007 4.68409 8.5145 5.16965 7.91566 5.16965ZM5.16787 4.085C5.16787 4.68358 4.68253 5.16893 4.08382 5.16893C3.48541 5.16893 3.00007 4.68358 3.00007 4.085C3.00007 3.48643 3.48541 3.00107 4.08382 3.00107C4.68253 3.00107 5.16787 3.48643 5.16787 4.085ZM7.91576 6.83459C7.31679 6.83459 6.83123 7.32016 6.83123 7.919C6.83123 8.51785 7.31679 9.00342 7.91576 9.00342C8.51444 9.00342 9 8.51785 9 7.919C9 7.32016 8.51444 6.83459 7.91576 6.83459ZM4.08392 6.83565C4.68248 6.83565 5.16783 7.32098 5.16783 7.91969C5.16783 8.51809 4.68248 9.00342 4.08392 9.00342C3.48535 9.00342 3 8.51809 3 7.91969C3 7.32098 3.48535 6.83565 4.08392 6.83565Z\"\n      fill=\"#A1A7B3\"\n    />\n  </MiniSVG>\n);\n\nconst EyeIcon: React.FC = props => (\n  <svg width=\"24\" height=\"20\" viewBox=\"0 0 24 20\" fill=\"none\" {...props}>\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M19.695 0.351482C19.9032 0.135371 20.1868 0.00948757 20.4855 0.000511017C20.7171 -0.00642408 20.9454 0.057366 21.1405 0.183512C21.3356 0.309658 21.4883 0.492283 21.5786 0.707441C21.669 0.922599 21.6927 1.16026 21.6468 1.38926C21.6008 1.61827 21.4873 1.82793 21.3212 1.99078L4.3048 19.1469C4.19867 19.2575 4.07178 19.3456 3.93152 19.4062C3.79125 19.4668 3.64043 19.4987 3.48783 19.5C3.33523 19.5012 3.1839 19.4718 3.04268 19.4135C2.90146 19.3552 2.77316 19.2691 2.66526 19.1603C2.55735 19.0515 2.47201 18.9222 2.4142 18.7798C2.35639 18.6374 2.32727 18.4849 2.32854 18.331C2.3298 18.1771 2.36143 18.0251 2.42157 17.8837C2.48171 17.7423 2.56917 17.6143 2.67885 17.5074L19.695 0.351482ZM0.193655 8.95376C2.47935 4.5123 7.03523 1.71636 11.9982 1.71636C13.5143 1.71601 14.9919 1.97725 16.3789 2.46512L14.7583 4.09901C13.9263 3.68538 12.9904 3.45188 12 3.45188C8.55044 3.45188 5.754 6.27118 5.75403 9.74917C5.75404 10.7476 5.98562 11.6913 6.39588 12.5301L3.92169 15.0246C2.39514 13.8491 1.11258 12.3359 0.194802 10.5571C-0.0645738 10.0547 -0.0649106 9.45653 0.193655 8.95376ZM17.6041 6.96802L20.0781 4.47375C21.6047 5.64932 22.8874 7.16248 23.8052 8.94153C24.0646 9.44387 24.0649 10.042 23.8064 10.5448C21.5205 14.9863 16.9647 17.7818 12.0018 17.7818C10.4857 17.7821 9.00815 17.5209 7.62116 17.033L9.2415 15.3994C10.0735 15.813 11.0096 16.0465 12 16.0465C15.4496 16.0465 18.246 13.227 18.246 9.74917C18.246 8.75058 18.0145 7.80688 17.6041 6.96802ZM9.24284 6.96914C10.0042 6.20163 11.0022 5.81824 12 5.81824C12.3155 5.81824 12.6308 5.85684 12.9387 5.93349L8.2154 10.6956C7.89855 9.40286 8.24082 7.97945 9.24284 6.96914ZM11.0613 13.5647L15.7846 8.80249C16.1013 10.0952 15.7589 11.5184 14.7569 12.5285C13.755 13.5388 12.3434 13.8839 11.0613 13.5647Z\"\n      fill=\"#5548FF\"\n    />\n    <path\n      d=\"M19.6951 0.351482C19.9034 0.135371 20.1869 0.00948757 20.4856 0.000511017C20.7173 -0.00642408 20.9456 0.057366 21.1406 0.183512C21.3357 0.309658 21.4884 0.492283 21.5787 0.707441C21.6691 0.922599 21.6928 1.16026 21.6469 1.38926C21.6009 1.61827 21.4874 1.82793 21.3213 1.99078L4.30491 19.1469C4.19879 19.2575 4.07189 19.3456 3.93163 19.4062C3.79137 19.4668 3.64054 19.4987 3.48794 19.5C3.33534 19.5012 3.18402 19.4718 3.0428 19.4135C2.90157 19.3552 2.77327 19.2691 2.66537 19.1603C2.55747 19.0515 2.47213 18.9222 2.41432 18.7798C2.35651 18.6374 2.32739 18.4849 2.32865 18.331C2.32992 18.1771 2.36154 18.0251 2.42169 17.8837C2.48183 17.7423 2.56929 17.6143 2.67896 17.5074L19.6951 0.351482Z\"\n      fill=\"#5548FF\"\n    />\n  </svg>\n);\n\nexport { AppsIcon, BlockchainIcon, EncryptionIcon, PrivateIcon, BlockstackMini, EyeIcon };\n","import { UserSession } from 'blockstack';\nimport { AuthOptions } from '../auth';\nimport {\n  PostConditionMode,\n  PostCondition,\n  StacksNetwork,\n  AnchorMode,\n  ClarityValue,\n} from '@blockstack/stacks-transactions';\nimport BN from 'bn.js';\n\nexport interface TxBase {\n  appDetails?: AuthOptions['appDetails'];\n  postConditionMode?: PostConditionMode;\n  postConditions?: PostCondition[];\n  network?: StacksNetwork;\n  anchorMode?: AnchorMode;\n  senderKey?: string;\n  nonce?: number;\n}\n\nexport interface FinishedTxData {\n  txId: string;\n  txRaw: string;\n}\n\nexport enum TransactionTypes {\n  ContractCall = 'contract_call',\n  ContractDeploy = 'smart_contract',\n  STXTransfer = 'token_transfer',\n}\n\n/**\n * Contract Call\n */\n\nexport enum ContractCallArgumentType {\n  BUFFER = 'buffer',\n  UINT = 'uint',\n  INT = 'int',\n  PRINCIPAL = 'principal',\n  BOOL = 'bool',\n}\n\nexport interface ContractCallBase extends TxBase {\n  contractAddress: string;\n  contractName: string;\n  functionName: string;\n  functionArgs: (string | ClarityValue)[];\n}\n\nexport interface ContractCallOptions extends ContractCallBase {\n  authOrigin?: string;\n  userSession?: UserSession;\n  finished?: (data: FinishedTxData) => void;\n}\n\nexport interface ContractCallArgument {\n  type: ContractCallArgumentType;\n  value: string;\n}\n\nexport interface ContractCallPayload extends ContractCallBase {\n  txType: TransactionTypes.ContractCall;\n  publicKey: string;\n  functionArgs: string[];\n}\n\n/**\n * Contract Deploy\n */\nexport interface ContractDeployBase extends TxBase {\n  contractName: string;\n  codeBody: string;\n}\n\nexport interface ContractDeployOptions extends ContractDeployBase {\n  authOrigin?: string;\n  userSession?: UserSession;\n  finished?: (data: FinishedTxData) => void;\n}\n\nexport interface ContractDeployPayload extends ContractDeployOptions {\n  publicKey: string;\n  txType: TransactionTypes.ContractDeploy;\n}\n\n/**\n * STX Transfer\n */\n\nexport interface STXTransferBase extends TxBase {\n  recipient: string;\n  amount: BN | string;\n  memo?: string;\n}\n\nexport interface STXTransferOptions extends STXTransferBase {\n  authOrigin?: string;\n  userSession?: UserSession;\n  finished?: (data: FinishedTxData) => void;\n}\n\nexport interface STXTransferPayload extends STXTransferOptions {\n  publicKey: string;\n  txType: TransactionTypes.STXTransfer;\n  amount: string;\n}\n\n/**\n * Transaction Popup\n */\n\nexport type TransactionOptions = ContractCallOptions | ContractDeployOptions | STXTransferOptions;\nexport type TransactionPayload = ContractCallPayload | ContractDeployPayload | STXTransferPayload;\n\nexport interface TransactionPopup {\n  token: string;\n  opts: TransactionOptions;\n}\n","import { UserSession, AppConfig } from 'blockstack';\nimport { SECP256K1Client, TokenSigner } from 'jsontokens';\nimport { defaultAuthURL } from '../auth';\nimport { popupCenter, setupListener } from '../popup';\nimport {\n  ContractCallOptions,\n  ContractCallPayload,\n  ContractDeployOptions,\n  ContractDeployPayload,\n  FinishedTxData,\n  TransactionPopup,\n  TransactionOptions,\n  STXTransferOptions,\n  STXTransferPayload,\n  TransactionPayload,\n  TransactionTypes,\n} from './types';\nimport { serializeCV } from '@blockstack/stacks-transactions';\n\nexport * from './types';\n\nconst getKeys = (_userSession?: UserSession) => {\n  let userSession = _userSession;\n\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n\n  const privateKey = userSession.loadUserData().appPrivateKey;\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n\n  return { privateKey, publicKey };\n};\n\nconst signPayload = async (payload: TransactionPayload, privateKey: string) => {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  return tokenSigner.signAsync(payload as any);\n};\n\nconst openTransactionPopup = async ({ token, opts }: TransactionPopup) => {\n  const extensionURL = await window.BlockstackProvider?.getURL();\n  const authURL = new URL(extensionURL || opts.authOrigin || defaultAuthURL);\n  const urlParams = new URLSearchParams();\n  urlParams.set('request', token);\n\n  const popup = popupCenter({\n    url: `${authURL.origin}/#/transaction?${urlParams.toString()}`,\n    h: 700,\n  });\n\n  setupListener<FinishedTxData>({\n    popup,\n    authURL,\n    onFinish: data => {\n      if (opts.finished) {\n        opts.finished(data);\n      }\n    },\n    messageParams: {},\n  });\n  return popup;\n};\n\nexport const makeContractCallToken = async (opts: ContractCallOptions) => {\n  const { functionArgs, appDetails } = opts;\n  const { privateKey, publicKey } = getKeys(opts.userSession);\n\n  const args: string[] = functionArgs.map(arg => {\n    if (typeof arg === 'string') {\n      return arg;\n    }\n    return serializeCV(arg).toString('hex');\n  });\n\n  const payload: ContractCallPayload = {\n    ...opts,\n    functionArgs: args,\n    txType: TransactionTypes.ContractCall,\n    publicKey,\n  };\n\n  if (appDetails) {\n    payload.appDetails = appDetails;\n  }\n\n  return signPayload(payload, privateKey);\n};\n\nexport const makeContractDeployToken = async (opts: ContractDeployOptions) => {\n  const { appDetails } = opts;\n  const { privateKey, publicKey } = getKeys(opts.userSession);\n\n  const payload: ContractDeployPayload = {\n    ...opts,\n    publicKey,\n    txType: TransactionTypes.ContractDeploy,\n  };\n\n  if (appDetails) {\n    payload.appDetails = appDetails;\n  }\n\n  return signPayload(payload, privateKey);\n};\n\nexport const makeSTXTransferToken = async (opts: STXTransferOptions) => {\n  const { amount, appDetails } = opts;\n  const { privateKey, publicKey } = getKeys(opts.userSession);\n\n  const payload: STXTransferPayload = {\n    ...opts,\n    amount: amount.toString(10),\n    publicKey,\n    txType: TransactionTypes.STXTransfer,\n  };\n\n  if (appDetails) {\n    payload.appDetails = appDetails;\n  }\n\n  return signPayload(payload, privateKey);\n};\n\nasync function generateTokenAndOpenPopup<T extends TransactionOptions>(\n  opts: T,\n  makeTokenFn: (opts: T) => Promise<string>\n) {\n  const token = await makeTokenFn(opts);\n  return openTransactionPopup({ token, opts });\n}\n\nexport const openContractCall = async (opts: ContractCallOptions) =>\n  generateTokenAndOpenPopup(opts, makeContractCallToken);\n\nexport const openContractDeploy = async (opts: ContractDeployOptions) =>\n  generateTokenAndOpenPopup(opts, makeContractDeployToken);\n\nexport const openSTXTransfer = async (opts: STXTransferOptions) =>\n  generateTokenAndOpenPopup(opts, makeSTXTransferToken);\n","import { useContext } from 'react';\nimport { authenticate, AuthOptions, FinishedData } from '../../auth';\nimport { openContractCall, openContractDeploy, openSTXTransfer } from '../../transactions';\nimport {\n  ContractCallOptions,\n  ContractDeployOptions,\n  STXTransferOptions,\n} from '../../transactions/types';\nimport { ConnectContext, ConnectDispatchContext, States } from '../components/connect/context';\n\nconst useConnectDispatch = () => {\n  const dispatch = useContext(ConnectDispatchContext);\n  if (!dispatch) {\n    throw new Error('This must be used within the ConnectProvider component.');\n  }\n  return dispatch;\n};\n\nexport const useConnect = () => {\n  const { isOpen, isAuthenticating, authData, screen, authOptions, userSession } = useContext(\n    ConnectContext\n  );\n  const dispatch = useConnectDispatch();\n\n  const doUpdateAuthOptions = (payload: Partial<AuthOptions>) => {\n    return dispatch({ type: States.UPDATE_AUTH_OPTIONS, payload });\n  };\n\n  const doChangeScreen = (newScreen: string) => dispatch({ type: newScreen });\n  const doGoToIntroScreen = () => doChangeScreen(States.SCREENS_INTRO);\n  const doGoToHowItWorksScreen = () => doChangeScreen(States.SCREENS_HOW_IT_WORKS);\n  const doGoToSignInScreen = () => doChangeScreen(States.SCREENS_SIGN_IN);\n\n  const doStartAuth = () => dispatch({ type: States.START_AUTH });\n  const doFinishAuth = (payload: FinishedData) => {\n    dispatch({ type: States.FINISH_AUTH, payload });\n    doCloseAuth();\n  };\n  const doCancelAuth = () => dispatch({ type: States.CANCEL_AUTH });\n\n  const doOpenAuth = (signIn?: boolean, opts?: Partial<AuthOptions>) => {\n    if (signIn) {\n      const options = {\n        ...authOptions,\n        ...opts,\n        finished: (payload: FinishedData) => {\n          doFinishAuth(payload);\n          authOptions.finished && authOptions.finished(payload);\n        },\n        sendToSignIn: true,\n      };\n      doStartAuth();\n      void authenticate(options);\n      return;\n    }\n    authOptions && doUpdateAuthOptions(authOptions);\n    dispatch({ type: States.MODAL_OPEN });\n  };\n  const doCloseAuth = () => {\n    dispatch({ type: States.MODAL_CLOSE });\n    setTimeout(doGoToIntroScreen, 250);\n  };\n  const doAuth = (options: Partial<AuthOptions> = {}) => {\n    doStartAuth();\n    void authenticate({\n      ...authOptions,\n      ...options,\n      finished: payload => {\n        authOptions.finished && authOptions.finished(payload);\n        doFinishAuth(payload);\n      },\n    });\n  };\n\n  const doContractCall = async (opts: ContractCallOptions) =>\n    openContractCall({\n      ...opts,\n      authOrigin: authOptions.authOrigin,\n      appDetails: authOptions.appDetails,\n    });\n\n  const doContractDeploy = async (opts: ContractDeployOptions) =>\n    openContractDeploy({\n      ...opts,\n      authOrigin: authOptions.authOrigin,\n      appDetails: authOptions.appDetails,\n    });\n\n  const doSTXTransfer = async (opts: STXTransferOptions) =>\n    openSTXTransfer({\n      ...opts,\n      authOrigin: authOptions.authOrigin,\n      appDetails: authOptions.appDetails,\n    });\n\n  return {\n    isOpen,\n    isAuthenticating,\n    authData,\n    authOptions,\n    screen,\n    userSession,\n    doOpenAuth,\n    doCloseAuth,\n    doChangeScreen,\n    doGoToIntroScreen,\n    doGoToHowItWorksScreen,\n    doGoToSignInScreen,\n    doCancelAuth,\n    doStartAuth,\n    doFinishAuth,\n    doAuth,\n    authenticate,\n    doContractCall,\n    doContractDeploy,\n    doSTXTransfer,\n  };\n};\n","import { useContext } from 'react';\nimport { ConnectContext } from '../components/connect/context';\n\nconst useAppDetails = () => {\n  const { authOptions } = useContext(ConnectContext);\n  if (!authOptions.appDetails) {\n    throw new Error('This must be used within the ConnectProvider component.');\n  }\n  return authOptions.appDetails;\n};\n\nexport { useAppDetails };\n","import React from 'react';\nimport { Text, BoxProps } from '@blockstack/ui';\n\nconst Title = (props: BoxProps) => (\n  <Text\n    width=\"100%\"\n    fontWeight=\"medium\"\n    fontSize=\"24px\"\n    lineHeight=\"32px\"\n    display=\"inline-block\"\n    {...props}\n  />\n);\n\nconst Pretitle = (props: BoxProps) => (\n  <Text\n    pt=\"loose\"\n    width=\"100%\"\n    fontWeight=\"medium\"\n    fontSize={['11px']}\n    lineHeight={['20px']}\n    color=\"ink.600\"\n    style={{\n      textTransform: 'uppercase',\n    }}\n    {...props}\n  />\n);\nconst Body: React.FC = props => <Text fontSize=\"14px\" lineHeight=\"20px\" {...props} />;\n\nexport { Pretitle, Title, Body };\n","import React from 'react';\n\nimport { Flex, Box, Spinner } from '@blockstack/ui';\n\ninterface ScreenLoaderProps {\n  isLoading?: boolean;\n}\n\nexport const ScreenLoader: React.FC<ScreenLoaderProps> = ({ isLoading }) => (\n  <Flex\n    align=\"center\"\n    justify=\"center\"\n    position=\"absolute\"\n    top={0}\n    left={0}\n    width=\"100%\"\n    height=\"100%\"\n    bg={`rgba(255,255,255,${isLoading ? 0.6 : 0})`}\n    borderBottomLeftRadius=\"6px\"\n    borderBottomRightRadius=\"6px\"\n    zIndex={99}\n    transition=\"250ms all\"\n    style={{ pointerEvents: isLoading ? 'unset' : 'none' }}\n    opacity={isLoading ? 1 : 0}\n  >\n    <Box transition=\"500ms all\" transform={isLoading ? 'none' : 'translateY(10px)'}>\n      <Spinner size=\"xl\" thickness=\"3px\" color=\"blue\" />\n    </Box>\n  </Flex>\n);\n","import React from 'react';\n\nimport { Flex, FlexProps } from '@blockstack/ui';\nimport { ScreenLoader } from './screen-loader';\n\ninterface ScreenBodyProps extends FlexProps {\n  noMinHeight?: boolean;\n  isLoading?: boolean;\n  onSubmit?: () => void;\n}\n\nexport const Screen: React.FC<ScreenBodyProps> = ({\n  noMinHeight,\n  isLoading,\n  children,\n  onSubmit,\n  ...rest\n}) => {\n  const handleSubmit = onSubmit\n    ? (e: React.FormEvent<HTMLInputElement>) => {\n        e.preventDefault();\n        onSubmit();\n      }\n    : undefined;\n  return (\n    <>\n      <ScreenLoader isLoading={isLoading} />\n      <Flex\n        width=\"100%\"\n        flexDirection=\"column\"\n        minHeight={noMinHeight ? undefined : ['100vh', 'unset']}\n        flex={1}\n        style={{ pointerEvents: isLoading ? 'none' : 'unset' }}\n        as={onSubmit ? 'form' : 'main'}\n        onSubmit={handleSubmit}\n        data-test=\"screen\"\n        {...rest}\n      >\n        {children}\n      </Flex>\n    </>\n  );\n};\n","export const PX = 6;\n","import React from 'react';\nimport { Flex, FlexProps } from '@blockstack/ui';\nimport { PX } from '../../common';\n\nexport const ScreenActions = (props: FlexProps) => <Flex px={PX} {...props} />;\n","import React from 'react';\n\nimport { Flex, FlexProps } from '@blockstack/ui';\nimport { Body, Pretitle, Title } from '../typography';\nimport { PX } from '../../common';\n\nexport interface ScreenBodyProps extends FlexProps {\n  pretitle?: string | React.ElementType;\n  body?: (string | React.ReactNode)[];\n  fullWidth?: boolean;\n  titleProps?: FlexProps;\n}\n\nexport const ScreenBody = ({\n  body,\n  pretitle,\n  fullWidth,\n  ...rest\n}: Omit<ScreenBodyProps, 'title'>) => {\n  return (\n    <Flex mx={fullWidth ? 0 : PX} flexDirection=\"column\" {...rest}>\n      {pretitle && <Pretitle>{pretitle}</Pretitle>}\n      {body && body.length\n        ? body.map((child, key) =>\n            child && React.isValidElement(child) && child.type === Title ? (\n              <React.Fragment key={key}>{child}</React.Fragment>\n            ) : (\n              <Body key={key}>{child}</Body>\n            )\n          )\n        : body}\n    </Flex>\n  );\n};\n","import React from 'react';\n\nimport { Flex, BoxProps } from '@blockstack/ui';\nimport { PX } from '../../common';\n\ntype ScreenFooterProps = BoxProps;\n\nexport const ScreenFooter: React.FC<ScreenFooterProps> = ({ children, ...rest }) => (\n  <Flex\n    mx={PX}\n    flex={1}\n    fontSize={['12px', '14px']}\n    color=\"ink.600\"\n    fontWeight=\"medium\"\n    justify=\"space-between\"\n    {...rest}\n  >\n    {children}\n  </Flex>\n);\n","import React from 'react';\nimport { Flex, Text } from '@blockstack/ui';\nimport { useAppDetails } from '../../hooks/use-app-details';\nimport { AppIcon } from '../app-icon';\n\nexport interface ScreenHeaderProps {\n  appDetails?: {\n    name: string;\n    icon: string;\n  };\n  title?: string | JSX.Element;\n  rightContent?: React.FC | JSX.Element;\n  close?: () => void;\n  hideIcon?: boolean;\n  hideLogo?: boolean;\n}\n\nexport const ScreenHeader = ({\n  appDetails,\n  hideLogo = false,\n  rightContent,\n  title: _title,\n  ...rest\n}: ScreenHeaderProps) => {\n  const { name, icon } = useAppDetails();\n\n  let appName = name;\n  let appIcon = icon;\n\n  if (appDetails) {\n    appName = appDetails.name;\n    appIcon = appDetails.icon;\n  }\n\n  return (\n    <Flex\n      py={[4, 5]}\n      px=\"base\"\n      height=\"56px\"\n      borderBottom=\"1px solid\"\n      borderBottomColor=\"inherit\"\n      borderRadius={['unset', '6px 6px 0 0']}\n      bg=\"white\"\n      align=\"center\"\n      justify=\"space-between\"\n      {...rest}\n    >\n      <Flex width=\"100%\" align=\"center\" justifyContent=\"space-between\">\n        <Flex align=\"center\">\n          {hideLogo ? null : <AppIcon src={appIcon} alt={appName || 'loading'} mr=\"tight\" />}\n          <Text fontWeight={500} textStyle={'body.small.medium'} fontSize={'12px'}>\n            {appName}\n          </Text>\n        </Flex>\n        {rightContent ? rightContent : null}\n      </Flex>\n    </Flex>\n  );\n};\n","import React from 'react';\nimport { Flex, PseudoBox, Box } from '@blockstack/ui';\nimport { BlockstackMini } from './vector';\nimport { buildEnterKeyEvent } from './link';\n\nconst onClick = () => {\n  typeof window !== 'undefined' && window.open('https://blockstack.org', '_blank');\n};\n\nexport const PoweredBy: React.FC = () => (\n  <Flex\n    fontSize={['12px', '14px']}\n    justifyContent=\"center\"\n    color=\"ink.600\"\n    textAlign=\"center\"\n    width=\"100%\"\n    my=\"loose\"\n  >\n    <PseudoBox\n      textAlign=\"center\"\n      onClick={onClick}\n      onKeyPress={buildEnterKeyEvent(onClick)}\n      textStyle=\"caption\"\n      display=\"flex\"\n      alignSelf=\"flex-end\"\n      tabIndex={0}\n      _hover={{\n        cursor: 'pointer',\n      }}\n    >\n      Powered by\n      <Box ml=\"2px\">\n        <BlockstackMini />\n      </Box>\n      Blockstack\n    </PseudoBox>\n  </Flex>\n);\n","import React from 'react';\n\nexport const UnionLine = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"7\" fill=\"none\" viewBox=\"0 0 32 7\">\n    <mask id=\"a\" width=\"32\" height=\"7\" x=\"0\" y=\"0\" fill=\"#000\" maskUnits=\"userSpaceOnUse\">\n      <path fill=\"#fff\" d=\"M0 0H32V7H0z\"></path>\n      <path\n        fillRule=\"evenodd\"\n        d=\"M3.5 5a1.5 1.5 0 001.415-1h22.17a1.5 1.5 0 100-1H4.915A1.5 1.5 0 103.5 5z\"\n        clipRule=\"evenodd\"\n      ></path>\n    </mask>\n    <path\n      fill=\"#677282\"\n      fillRule=\"evenodd\"\n      d=\"M3.5 5a1.5 1.5 0 001.415-1h22.17a1.5 1.5 0 100-1H4.915A1.5 1.5 0 103.5 5z\"\n      clipRule=\"evenodd\"\n    ></path>\n    <path\n      fill=\"#fff\"\n      d=\"M4.915 4V2H3.5L3.03 3.334 4.915 4zm22.17 0l1.886-.667L28.5 2h-1.415v2zm0-1v2H28.5l.471-1.333L27.085 3zM4.915 3l-1.886.666L3.5 5h1.415V3zm-1.886.334A.5.5 0 013.5 3v4a3.5 3.5 0 003.3-2.334L3.03 3.334zM27.085 2H4.915v4h22.17V2zM28.5 3a.5.5 0 01.471.333L25.2 4.667A3.5 3.5 0 0028.5 7V3zm-.5.5a.5.5 0 01.5-.5v4A3.5 3.5 0 0032 3.5h-4zm.5.5a.5.5 0 01-.5-.5h4A3.5 3.5 0 0028.5 0v4zm.471-.333A.5.5 0 0128.5 4V0a3.5 3.5 0 00-3.3 2.333l3.771 1.333zM4.915 5h22.17V1H4.915v4zM3.5 4a.5.5 0 01-.471-.334L6.8 2.334A3.5 3.5 0 003.5 0v4zm.5-.5a.5.5 0 01-.5.5V0A3.5 3.5 0 000 3.5h4zM3.5 3a.5.5 0 01.5.5H0A3.5 3.5 0 003.5 7V3z\"\n      mask=\"url(#a)\"\n    ></path>\n  </svg>\n);\n","import React from 'react';\n\nexport const PadlockIcon = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"none\" viewBox=\"0 0 64 64\">\n    <path\n      d=\"M0 25.6C0 16.6392 0 12.1587 1.7439 8.73615C3.27787 5.72556 5.72556 3.27787 8.73615 1.7439C12.1587 0 16.6392 0 25.6 0L38.4 0C47.3608 0 51.8413 0 55.2638 1.7439C58.2744 3.27787 60.7221 5.72556 62.2561 8.73615C64 12.1587 64 16.6392 64 25.6V38.4C64 47.3608 64 51.8413 62.2561 55.2638C60.7221 58.2744 58.2744 60.7221 55.2638 62.2561C51.8413 64 47.3608 64 38.4 64H25.6C16.6392 64 12.1587 64 8.73615 62.2561C5.72556 60.7221 3.27787 58.2744 1.7439 55.2638C0 51.8413 0 47.3608 0 38.4L0 25.6Z\"\n      fill=\"#E3E5FF\"\n    />\n    <path\n      d=\"M40.7273 26.7143H39.6364V23.5C39.6364 21.5109 38.8318 19.6032 37.3997 18.1967C35.9676 16.7902 34.0253 16 32 16C29.9747 16 28.0324 16.7902 26.6003 18.1967C25.1682 19.6032 24.3636 21.5109 24.3636 23.5V26.7143H23.2727C22.405 26.7152 21.5732 27.0542 20.9596 27.6568C20.3461 28.2594 20.001 29.0764 20 29.9286V42.7857C20.001 43.6379 20.3461 44.4549 20.9596 45.0575C21.5732 45.6601 22.405 45.9991 23.2727 46H40.7273C41.595 45.9991 42.4268 45.6601 43.0404 45.0575C43.6539 44.4549 43.999 43.6379 44 42.7857V29.9286C43.999 29.0764 43.6539 28.2594 43.0404 27.6568C42.4268 27.0542 41.595 26.7152 40.7273 26.7143ZM26.5455 23.5C26.5455 22.0792 27.1201 20.7166 28.1431 19.7119C29.166 18.7073 30.5534 18.1429 32 18.1429C33.4466 18.1429 34.834 18.7073 35.8569 19.7119C36.8799 20.7166 37.4545 22.0792 37.4545 23.5V26.7143H26.5455V23.5Z\"\n      fill=\"#3700FF\"\n    />\n  </svg>\n);\n","import React from 'react';\nimport { Flex, Box, BoxProps, Stack, Button } from '@blockstack/ui';\nimport { CheckList } from '../checklist';\nimport { Link } from '../link';\nimport { AppIcon } from '../app-icon';\nimport { EyeIcon, EncryptionIcon } from '../vector';\nimport { useConnect } from '../../hooks/use-connect';\nimport { useAppDetails } from '../../hooks/use-app-details';\nimport { Title } from '../typography';\nimport { Screen, ScreenBody, ScreenActions, ScreenFooter } from '../screen';\nimport { UnionLine } from '../icons/union-line';\nimport { PadlockIcon } from '../icons/padlock';\n\nconst AppElement = ({\n  name,\n  icon,\n  ...rest\n}: BoxProps & {\n  name: string;\n  icon: string;\n}) => (\n  <Flex mx=\"auto\" position=\"relative\" {...rest}>\n    <AppIcon size=\"64px\" mr=\"loose\" src={icon} alt={name} borderRadius=\"0\" />\n    <Box position=\"absolute\" left=\"50%\" top=\"50%\" ml=\"-16px\" mt=\"-6px\">\n      <UnionLine />\n    </Box>\n    <PadlockIcon />\n  </Flex>\n);\n\nexport const Intro = () => {\n  const { doGoToHowItWorksScreen, doAuth } = useConnect();\n  const { name, icon } = useAppDetails();\n\n  return (\n    <Screen noMinHeight textAlign=\"center\">\n      <AppElement mt=\"loose\" name={name} icon={icon} />\n      <ScreenBody\n        fullWidth\n        mt=\"base\"\n        body={[\n          <Title\n            fontSize=\"20px\"\n            lineHeight=\"28px\"\n            px=\"extra-loose\"\n          >{`${name} guarantees your privacy by encrypting everything`}</Title>,\n          <Box mt=\"base\" mx=\"auto\" width=\"100%\" height=\"1px\" bg=\"#E5E5EC\" />,\n          <Box>\n            <CheckList\n              items={[\n                {\n                  icon: EncryptionIcon,\n                  text: \"You'll get a Secret Key that automatically encrypts everything you do\",\n                },\n                {\n                  icon: EyeIcon,\n                  text: `${name} won't be able to see, access, or track your activity`,\n                },\n              ]}\n            />\n          </Box>,\n        ]}\n      />\n      <ScreenActions>\n        <Button width=\"100%\" size=\"lg\" mt=\"tight\" onClick={() => doAuth()}>\n          Get your Secret Key\n        </Button>\n      </ScreenActions>\n      <ScreenFooter>\n        <Stack mb=\"base-loose\" mt=\"base-tight\" spacing=\"base\" isInline>\n          <Link textStyle=\"caption\" color=\"blue\" onClick={() => doAuth({ sendToSignIn: true })}>\n            Sign in\n          </Link>\n          <Link\n            color=\"blue\"\n            textStyle=\"caption\"\n            onClick={() => {\n              doGoToHowItWorksScreen();\n            }}\n          >\n            How it works\n          </Link>\n          <Link\n            color=\"blue\"\n            textStyle=\"caption\"\n            onClick={() => {\n              window.open('https://www2.blockstack.org/install-extension', '_blank');\n            }}\n          >\n            Install extension\n          </Link>\n        </Stack>\n      </ScreenFooter>\n    </Screen>\n  );\n};\n","import React from 'react';\nimport { Box, Text, Button } from '@blockstack/ui';\nimport { useAppDetails } from '../../hooks/use-app-details';\nimport { useConnect } from '../../hooks/use-connect';\nimport { Title } from '../typography';\nimport { Screen, ScreenBody, ScreenActions, ScreenFooter } from '../screen/index';\nimport { Link } from '../link';\nimport { PoweredBy } from '../powered-by';\n\ninterface InfoSection {\n  title: string;\n  body: string | JSX.Element;\n}\n\nconst howSecretKeyWorks = ({ name }: { name: string }): InfoSection[] => [\n  {\n    title: 'What is Blockstack?',\n    body: (\n      <span>\n        Blockstack is the open-source technology that generates your Secret Key. There&apos;s no\n        company that owns or controls Blockstack, it is independent. Go to{' '}\n        <Link\n          color=\"blue\"\n          display=\"inline-block\"\n          onClick={() => window.open('https://blockstack.org', '_blank')}\n          fontSize=\"14px\"\n        >\n          blockstack.org\n        </Link>{' '}\n        to learn more.\n      </span>\n    ),\n  },\n  {\n    title: 'Encryption',\n    body: `Encryption is always on. It locks everything you do in ${name} into useless codes. Because of this, ${name} cant see or track your activity. Your data can only be unlocked with the key that you own. No one else has this key, not even ${name}, so no one else can unlock your data`,\n  },\n  {\n    title: 'What is a Secret Key?',\n    body: `Your Secret Key unlocks your data. It's created independently from ${name} to make sure that ${name} doesn't have it. An open-source protocol called Blockstack generates your Secret Key when you sign up. Nobody but you will have your Secret Key, to make sure that only you have access to your data.`,\n  },\n  {\n    title: 'When will I need my Secret Key?',\n    body: `Youll need your Secret Key to prove its you when you use ${name} on a new device, such as a new phone or laptop. After that, your Secret Key will stay active to keep you safe and private in the apps you use on that device.`,\n  },\n];\n\nexport const HowItWorks: React.FC = () => {\n  const { name } = useAppDetails();\n  const { doAuth } = useConnect();\n\n  return (\n    <Screen>\n      <ScreenBody\n        pretitle=\"How it works\"\n        body={[\n          <Title>\n            {name} keeps everything you do private with Blockstack&apos;s Secret Key technology\n          </Title>,\n          <Text mt=\"tight\" display=\"block\">\n            Normally, apps keep your data for them to use. When you have a Secret Key, you no longer\n            have to trust {name} with your data because {name} won&apos;t have access.\n          </Text>,\n          <Box mt=\"tight\">\n            {howSecretKeyWorks({ name }).map(({ title, body }, key) => (\n              <Box mt=\"extra-loose\" key={key}>\n                <Text mt=\"base-tight\" display=\"block\" fontWeight=\"semibold\">\n                  {title}\n                </Text>\n                <Text mt=\"tight\" display=\"block\">\n                  {body}\n                </Text>\n              </Box>\n            ))}\n          </Box>,\n        ]}\n      />\n      <ScreenActions>\n        <Button width=\"100%\" size=\"lg\" mt=\"loose\" onClick={() => doAuth()}>\n          Get Started\n        </Button>\n      </ScreenActions>\n      <ScreenFooter>\n        <PoweredBy />\n      </ScreenFooter>\n    </Screen>\n  );\n};\n","import React from 'react';\nimport { Flex, Text } from '@blockstack/ui';\nimport { Logo } from '../logo';\nimport { useHover } from 'use-events';\nimport { useConnect } from '../../hooks/use-connect';\n\nconst ContinueWithAuth: React.FC = props => {\n  const { authenticate, authOptions } = useConnect();\n  const [hovered, bind] = useHover();\n  return (\n    <Flex\n      textAlign=\"center\"\n      width=\"100%\"\n      align=\"center\"\n      justifyContent=\"center\"\n      border=\"1px solid\"\n      borderColor=\"inherit\"\n      px=\"loose\"\n      py=\"base-tight\"\n      borderRadius=\"6px\"\n      boxShadow=\"mid\"\n      height={14}\n      transition=\"250ms all\"\n      cursor={hovered ? 'pointer' : 'unset'}\n      bg={hovered ? 'rgba(0,0,0,0.02)' : 'white'}\n      transform={hovered ? 'translateY(-2px)' : 'none'}\n      onClick={() => {\n        void authenticate({ ...authOptions, sendToSignIn: true });\n      }}\n      {...bind}\n      {...props}\n    >\n      <Logo mr=\"tight\" />\n      <Text fontWeight={500}>Continue with Secret Key</Text>\n    </Flex>\n  );\n};\n\nexport { ContinueWithAuth };\n","// https://github.com/moldy530/react-use-scroll-lock/blob/master/src/use-scroll-lock.ts\n\nimport { useEffect, useState } from 'react';\n\ndeclare global {\n  // tslint:disable-next-line: interface-name\n  interface Window {\n    __useScrollLockStyle: string | undefined | null;\n    __useScrollLockInstances: Set<{}> | undefined | null;\n  }\n}\n\nlet instances: Set<{}> = new Set();\n\nif (typeof window !== 'undefined') {\n  // this is necessary because we may share instances of this file on a page so we store these globally\n  window.__useScrollLockInstances = window.__useScrollLockInstances || new Set<{}>();\n  instances = window.__useScrollLockInstances;\n}\n\nconst originalStyle = () => {\n  window.__useScrollLockStyle =\n    window.__useScrollLockStyle || window.getComputedStyle(document.body).overflow;\n\n  return window.__useScrollLockStyle;\n};\n\nconst registerInstance = (instance: {}) => {\n  if (instances.size === 0) {\n    setBodyOverflow(true);\n  }\n\n  instances.add(instance);\n};\n\nconst unregisterInstance = (instance: {}) => {\n  instances.delete(instance);\n\n  if (instances.size === 0) {\n    setBodyOverflow(false);\n  }\n};\n\nconst setBodyOverflow = (shouldLock: boolean) => {\n  if (shouldLock) {\n    originalStyle();\n    document.body.style.overflow = 'hidden';\n  } else {\n    document.body.style.overflow = originalStyle();\n  }\n};\n\nexport const useScrollLock = (shouldLock: boolean) => {\n  // we generate a unique reference to the component that uses this thing\n  const [elementId] = useState({});\n\n  useEffect(() => {\n    if (shouldLock) {\n      registerInstance(elementId);\n    }\n\n    // Re-enable scrolling when component unmounts\n    return () => unregisterInstance(elementId);\n  }, [elementId, shouldLock]); // ensures effect is only run on mount, unmount, and on shouldLock change\n};\n","import React from 'react';\nimport {\n  Modal as BlockstackModal,\n  ThemeProvider,\n  theme,\n  ScopedCSSReset,\n  Flex,\n  Box,\n  Text,\n  ChevronIcon,\n} from '@blockstack/ui';\nimport { useHover } from 'use-events';\nimport { Logo } from '../logo';\nimport { Intro } from '../screens/intro';\nimport { HowItWorks } from '../screens/how-it-works';\nimport { ContinueWithAuth } from '../screens/sign-in';\nimport { useConnect } from '../../hooks/use-connect';\nimport { useScrollLock } from '../../hooks/use-scroll-lock';\nimport { States } from '../connect/context';\n\nconst CloseIcon = ({ size = 16 }) => (\n  <svg width={size} height={size} viewBox=\"0 0 16 16\">\n    <path\n      fill=\"#C1C3CC\"\n      fillRule=\"evenodd\"\n      d=\"M4.817 3.403a1 1 0 00-1.414 1.414L6.586 8l-3.183 3.183a1 1 0 001.414 1.415L8 9.415l3.183 3.183a1 1 0 101.415-1.415L9.415 8l3.183-3.183a1.002 1.002 0 00-.325-1.631 1 1 0 00-1.09.217L8 6.586 4.817 3.403z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\n\ninterface HeaderTitleProps {\n  title: string;\n  hideIcon?: boolean;\n}\n\nconst HeaderTitle: React.FC<HeaderTitleProps> = ({ hideIcon = false, title }) => (\n  <Flex align=\"center\">\n    {hideIcon ? null : <Logo mr=\"tight\" />}\n    <Text fontWeight={500} fontSize={'12px'}>\n      {title}\n    </Text>\n  </Flex>\n);\n\ninterface ModalHeader {\n  title: string;\n  close?: boolean;\n  back?: any;\n  hideIcon?: boolean;\n  hideTitleElements?: boolean;\n}\n\nconst ModalHeaderIconButton = ({ size, ...props }: any) => {\n  const [hover, bind] = useHover();\n  const Icon = props.icon;\n\n  return (\n    <Box\n      as=\"button\"\n      border=\"0\"\n      borderColor=\"transparent\"\n      backgroundColor=\"transparent\"\n      cursor={hover ? 'pointer' : 'unset'}\n      {...bind}\n      {...props}\n    >\n      <Icon direction=\"left\" size={size} />\n    </Box>\n  );\n};\n\nconst ModalHeader = ({ title, back, hideIcon, close, hideTitleElements, ...rest }: ModalHeader) => {\n  const { doCloseAuth, doChangeScreen } = useConnect();\n  return (\n    <Flex\n      p=\"base\"\n      borderRadius={['unset', '6px 6px 0 0']}\n      bg=\"white\"\n      align=\"center\"\n      justify=\"space-between\"\n      position=\"relative\"\n      borderBottom={back ? '1px solid' : 'unset'}\n      borderBottomColor=\"inherit\"\n      {...rest}\n    >\n      {back ? (\n        <ModalHeaderIconButton onClick={() => doChangeScreen(back)} icon={ChevronIcon} size={22} />\n      ) : null}\n      {!hideTitleElements ? (\n        <Flex\n          align=\"center\"\n          mx={back ? 'auto' : 'unset'}\n          transform={back ? 'translateX(-15px)' : 'unset'}\n        >\n          <HeaderTitle hideIcon={hideIcon} title={title} />\n        </Flex>\n      ) : (\n        <Flex />\n      )}\n      {close ? <ModalHeaderIconButton size={16} icon={CloseIcon} onClick={doCloseAuth} /> : null}\n    </Flex>\n  );\n};\n\nconst RenderScreen: React.FC = () => {\n  const { screen } = useConnect();\n  switch (screen) {\n    case States.SCREENS_HOW_IT_WORKS: {\n      return <HowItWorks />;\n    }\n    case States.SCREENS_SIGN_IN: {\n      return (\n        <Box width=\"100%\" p=\"base-loose\">\n          <ContinueWithAuth />\n        </Box>\n      );\n    }\n    default: {\n      return <Intro />;\n    }\n  }\n};\n\nexport const Modal = () => {\n  const { isOpen, doCloseAuth, screen } = useConnect();\n  useScrollLock(isOpen);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <ScopedCSSReset>\n        <BlockstackModal\n          headerComponent={\n            <ModalHeader\n              close={!(screen === States.SCREENS_HOW_IT_WORKS)}\n              hideTitleElements={true}\n              back={screen === States.SCREENS_HOW_IT_WORKS ? States.SCREENS_INTRO : undefined}\n              title={screen === States.SCREENS_SIGN_IN ? 'Sign In' : 'Secret Key'}\n            />\n          }\n          close={doCloseAuth}\n          isOpen={isOpen}\n        >\n          <RenderScreen />\n        </BlockstackModal>\n      </ScopedCSSReset>\n    </ThemeProvider>\n  );\n};\n","import React from 'react';\nimport { ConnectProvider } from './context';\nimport { Modal } from '../modal';\nimport { AuthOptions } from '../../../auth';\n\n/**\n * Usage\n *\n *\n * const auth = {\n      manifestPath: '/static/manifest.json',\n      redirectTo: '/',\n      finished: ({userSession}) => {\n        doFinishSignIn();\n      },\n      authOrigin,\n      appDetails: {\n        name: 'Wink',\n        icon: 'url'\n      }\n    }\n *\n * <Connect authOptions={authOptions} />\n */\nconst Connect = ({ authOptions, children }: { authOptions: AuthOptions; children: any }) => {\n  return (\n    <ConnectProvider authOptions={authOptions}>\n      <Modal />\n      {children}\n    </ConnectProvider>\n  );\n};\n\nexport { Connect };\n","import React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useConnect, Connect } from './react';\nimport { AuthOptions, authenticate } from './auth';\n\nconst Base: React.FC = () => {\n  const { doOpenAuth } = useConnect();\n\n  useEffect(() => {\n    // add a small delay before triggering the modal, to properly allow\n    // animations to show\n    const delay = 10;\n    setTimeout(() => {\n      doOpenAuth();\n    }, delay);\n  }, []);\n\n  return <div />;\n};\n\nexport const showBlockstackConnect = (authOptions: AuthOptions) => {\n  if (authOptions.sendToSignIn) {\n    return authenticate(authOptions);\n  }\n  const baseDiv = document.createElement('div');\n  document.body.appendChild(baseDiv);\n  ReactDOM.render(\n    <Connect authOptions={authOptions}>\n      <Base />\n    </Connect>,\n    baseDiv\n  );\n  return;\n};\n"],"names":["defaultWidth","defaultHeight","defaultTitle","popupCenter","url","title","w","h","skipPopupFallback","win","window","isSafari","safari","undefined","browserViewport","width","innerWidth","height","innerHeight","browserToolbarHeight","outerHeight","browserSidepanelWidth","outerWidth","removeUnusableSpaceX","coord","screen","availWidth","removeUnusableSpaceY","availHeight","browserPosition","x","screenX","y","screenY","left","top","options","scrollbars","optionsString","Object","keys","map","key","newWindow","open","join","focus","setupListener","popup","messageParams","onFinish","onCancel","authURL","lastPong","pingInterval","interval","setInterval","console","log","postMessage","method","origin","error","warn","clearInterval","Date","getTime","receiveMessage","event","data","source","removeEventListener","receiveMessageCallback","addEventListener","defaultAuthURL","__CONNECT_VERSION__","version","isMobile","ua","navigator","userAgent","test","shouldUsePopup","getOrCreateUserSession","userSession","appConfig","AppConfig","document","location","href","UserSession","authenticate","redirectTo","manifestPath","finished","authOrigin","sendToSignIn","_userSession","appDetails","isUserSignedIn","signUserOut","transitKey","generateAndStoreTransitKey","authRequest","makeAuthRequest","scopes","connectVersion","params","search","substr","split","filter","param","startsWith","urlParams","URLSearchParams","forEach","value","set","path","BlockstackProvider","getURL","extensionURL","URL","toString","setupAuthListener","authResponse","handlePendingSignIn","getUserData","loadUserData","isSignInPending","States","initialState","isOpen","isAuthenticating","SCREENS_INTRO","authData","authOptions","name","icon","connectReducer","state","type","payload","MODAL_OPEN","MODAL_CLOSE","START_AUTH","FINISH_AUTH","CANCEL_AUTH","SCREENS_HOW_IT_WORKS","SCREENS_SIGN_IN","UPDATE_AUTH_OPTIONS","Error","ConnectContext","createContext","ConnectDispatchContext","ConnectProvider","children","useReducer","dispatch","React","Provider","Logo","props","Box","as","viewBox","fill","rx","d","Item","Text","fontSize","color","CheckList","items","item","Icon","text","Flex","px","pb","pt","borderBottom","length","borderColor","align","textAlign","alignSelf","mt","mr","buildEnterKeyEvent","onClick","Link","_hover","textStyle","rest","onKeyPress","tabIndex","textDecoration","cursor","Image","style","maxWidth","display","AppIcon","src","alt","borderRadius","overflow","size","loading","maxHeight","EncryptionIcon","MiniSVG","Styled","svg","BlockstackMini","fillRule","clipRule","EyeIcon","TransactionTypes","ContractCallArgumentType","generateTokenAndOpenPopup","opts","makeTokenFn","token","openTransactionPopup","getKeys","privateKey","appPrivateKey","publicKey","SECP256K1Client","derivePublicKey","signPayload","tokenSigner","TokenSigner","signAsync","makeContractCallToken","functionArgs","args","arg","serializeCV","txType","ContractCall","makeContractDeployToken","ContractDeploy","makeSTXTransferToken","amount","STXTransfer","openContractCall","openContractDeploy","openSTXTransfer","useConnectDispatch","useContext","useConnect","doUpdateAuthOptions","doChangeScreen","newScreen","doGoToIntroScreen","doGoToHowItWorksScreen","doGoToSignInScreen","doStartAuth","doFinishAuth","doCloseAuth","doCancelAuth","doOpenAuth","signIn","setTimeout","doAuth","doContractCall","doContractDeploy","doSTXTransfer","useAppDetails","Title","fontWeight","lineHeight","Pretitle","textTransform","Body","ScreenLoader","isLoading","justify","position","bg","borderBottomLeftRadius","borderBottomRightRadius","zIndex","transition","pointerEvents","opacity","transform","Spinner","thickness","Screen","noMinHeight","onSubmit","handleSubmit","e","preventDefault","flexDirection","minHeight","flex","PX","ScreenActions","ScreenBody","body","pretitle","fullWidth","mx","child","isValidElement","Fragment","ScreenFooter","ScreenHeader","hideLogo","rightContent","_title","appName","appIcon","py","borderBottomColor","justifyContent","PoweredBy","my","PseudoBox","ml","UnionLine","xmlns","id","maskUnits","mask","PadlockIcon","AppElement","Intro","Button","Stack","mb","spacing","isInline","howSecretKeyWorks","HowItWorks","ContinueWithAuth","useHover","hovered","bind","border","boxShadow","instances","Set","__useScrollLockInstances","originalStyle","__useScrollLockStyle","getComputedStyle","registerInstance","instance","setBodyOverflow","add","unregisterInstance","shouldLock","useScrollLock","useState","elementId","useEffect","CloseIcon","HeaderTitle","hideIcon","ModalHeaderIconButton","hover","backgroundColor","direction","ModalHeader","back","close","hideTitleElements","p","ChevronIcon","RenderScreen","Modal","ThemeProvider","theme","ScopedCSSReset","BlockstackModal","headerComponent","Connect","Base","delay","showBlockstackConnect","baseDiv","createElement","appendChild","ReactDOM","render"],"mappings":"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"}